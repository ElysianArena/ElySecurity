# ElySecurity æœåŠ¡å™¨å®‰å…¨æ’ä»¶

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Minecraft Nukkit æœåŠ¡å™¨å®‰å…¨æ’ä»¶ï¼Œæä¾›å…¨é¢çš„ç©å®¶ç®¡ç†å’Œå†…å®¹å®‰å…¨åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ”’ æ ¸å¿ƒå®‰å…¨åŠŸèƒ½
- **OPæƒé™ç®¡ç†** - æ•°æ®åº“/æ–‡ä»¶åŒé‡å­˜å‚¨æ¨¡å¼
- **æƒé™çŠ¶æ€åŒæ­¥** - å®æ—¶æ£€æµ‹å¹¶åŒæ­¥ç©å®¶æƒé™
- **å†…å®¹å®‰å…¨æ£€æµ‹** - æ”¯æŒæœ¬åœ°å’Œç™¾åº¦APIåŒé‡æ£€æµ‹

### ğŸ›¡ï¸ åè¿è§„æœºåˆ¶
- **æ™ºèƒ½åˆ·å±æ£€æµ‹** - åŸºäºæ¶ˆæ¯é—´éš”ã€ç›¸ä¼¼åº¦ã€ä¿¡æ¯ç†µçš„å¤šç»´åº¦æ£€æµ‹
- **è¿ç¦è¯è¿‡æ»¤** - æœ¬åœ°è¯åº“ + ç™¾åº¦AIå†…å®¹å®¡æ ¸
- **å¤šç§æƒ©ç½šæ–¹å¼** - è­¦å‘Šã€è¸¢å‡ºã€ç¦è¨€ç­‰å¯é…ç½®æƒ©ç½š

### âš™ï¸ æŠ€æœ¯ç‰¹æ€§
- **åŒå­˜å‚¨æ¨¡å¼** - å¯é€‰æ‹©MySQLæ•°æ®åº“æˆ–YAMLæ–‡ä»¶å­˜å‚¨
- **Redisç¼“å­˜æ”¯æŒ** - é«˜æ€§èƒ½ç¼“å­˜åŠ é€Ÿ
- **å¤šè¯­è¨€æ”¯æŒ** - ä¸­è‹±æ–‡ç•Œé¢
- **å¼‚æ­¥æ£€æµ‹** - ä¸é˜»å¡æœåŠ¡å™¨ä¸»çº¿ç¨‹

## ğŸ“¦ å®‰è£…è¦æ±‚

### ç¯å¢ƒè¦æ±‚
- **Nukkit API**: 1.0.10+
- **Java**: 8+
- **å¯é€‰**: MySQL 5.7+ / Redis 5+

### ä¾èµ–
- **å¿…é¡»**: Nukkit æœåŠ¡å™¨
- **å¯é€‰**: MySQLé©±åŠ¨ã€Rediså®¢æˆ·ç«¯

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æ’ä»¶
å°† `ElySecurity.jar` æ”¾å…¥ `plugins/` ç›®å½•å¹¶é‡å¯æœåŠ¡å™¨ã€‚

### 2. åŸºç¡€é…ç½®
ç¼–è¾‘ `plugins/ElySecurity/config.yml`:

```yaml
# åŸºæœ¬è®¾ç½®
language: "zh_CN"  # è¯­è¨€: zh_CN / en_US

# å­˜å‚¨æ¨¡å¼é€‰æ‹©
mysql:
  enabled: false   # å…³é—­MySQLï¼Œä½¿ç”¨æ–‡ä»¶å­˜å‚¨
```

### 3. æ·»åŠ ç®¡ç†å‘˜
åœ¨æ§åˆ¶å°æ‰§è¡Œï¼š
```bash
op add ä½ çš„æ¸¸æˆID
```

## ğŸ› ï¸ é…ç½®è¯´æ˜

### å­˜å‚¨æ¨¡å¼é…ç½®

#### æ–¹æ¡ˆAï¼šä½¿ç”¨æ–‡ä»¶å­˜å‚¨ï¼ˆç®€å•ï¼‰
```yaml
mysql:
  enabled: false
```

OPåˆ—è¡¨å°†ä¿å­˜åœ¨ï¼š`plugins/ElySecurity/admin.yml`

#### æ–¹æ¡ˆBï¼šä½¿ç”¨æ•°æ®åº“å­˜å‚¨ï¼ˆæ¨èï¼‰
```yaml
mysql:
  enabled: true
  host: "localhost"
  port: 3306
  database: "elysecurity"
  username: "root"
  password: "your_password"
```

### å®‰å…¨åŠŸèƒ½é…ç½®

#### ååˆ·å±è®¾ç½®
```yaml
anti-spam:
  enabled: true
  message-interval: 1000  # æ¶ˆæ¯é—´éš”(ms)
  similarity-threshold: 0.8  # ç›¸ä¼¼åº¦é˜ˆå€¼
  punishment: "kick"  # æƒ©ç½šæ–¹å¼: warning/kick
```

#### è¿ç¦è¯è®¾ç½®
```yaml
prohibited-words:
  enabled: true
  mode: "local"  # local/baidu/both
  punishment: "mute"  # æƒ©ç½šæ–¹å¼: warning/kick/mute
  mute-duration: 300  # ç¦è¨€æ—¶é•¿(ç§’)
```

## ğŸ“‹ å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ | æƒé™ | æè¿° | ä½¿ç”¨ç¤ºä¾‹ |
|------|------|------|----------|
| `/op add <ç©å®¶>` | elysecurity.op | æ·»åŠ OPæƒé™ | `/op add Steve` |
| `/op remove <ç©å®¶>` | elysecurity.op | ç§»é™¤OPæƒé™ | `/op remove Alex` |

> âš ï¸ æ³¨æ„ï¼šOPå‘½ä»¤åªèƒ½åœ¨æœåŠ¡å™¨æ§åˆ¶å°æ‰§è¡Œ

## ğŸ“ æ–‡ä»¶ç»“æ„

```
plugins/ElySecurity/
â”œâ”€â”€ config.yml              # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ admin.yml              # OPåˆ—è¡¨ï¼ˆæ–‡ä»¶æ¨¡å¼ï¼‰
â”œâ”€â”€ prohibited-words.yml   # è¿ç¦è¯åº“
â”œâ”€â”€ lang/
â”‚   â”œâ”€â”€ zh_CN.yml         # ä¸­æ–‡è¯­è¨€æ–‡ä»¶
â”‚   â””â”€â”€ en_US.yml         # è‹±æ–‡è¯­è¨€æ–‡ä»¶
â””â”€â”€ logs/                 # æ—¥å¿—ç›®å½•
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### Redisç¼“å­˜åŠ é€Ÿ
```yaml
redis:
  enabled: true
  host: "localhost"
  port: 6379
  password: ""
```

### ç™¾åº¦AIå†…å®¹å®¡æ ¸
```yaml
baidu-api:
  enabled: true
  api-key: "your_api_key"
  secret-key: "your_secret_key"
```

### è‡ªå®šä¹‰è¿ç¦è¯
ç¼–è¾‘ `prohibited-words.yml`ï¼š
```yaml
local-words:
  - "è¿è§„è¯1"
  - "è¿è§„è¯2"
  - "è¿è§„è¯3"
```

## â“ å¸¸è§é—®é¢˜

### Q1: æ’ä»¶æ— æ³•åŠ è½½ï¼Ÿ
- æ£€æŸ¥Nukkitç‰ˆæœ¬æ˜¯å¦â‰¥1.0.10
- æ£€æŸ¥Javaç‰ˆæœ¬æ˜¯å¦â‰¥8
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Q2: OPæƒé™ä¸åŒæ­¥ï¼Ÿ
- ç¡®ä¿å­˜å‚¨æ¨¡å¼é…ç½®æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“è¿æ¥ï¼ˆå¦‚æœä½¿ç”¨MySQLï¼‰
- å°è¯•é‡æ–°æ‰§è¡ŒOPå‘½ä»¤

### Q3: å¦‚ä½•å¤‡ä»½OPåˆ—è¡¨ï¼Ÿ
- **æ–‡ä»¶æ¨¡å¼**: å¤‡ä»½ `admin.yml`
- **æ•°æ®åº“æ¨¡å¼**: å¤‡ä»½MySQLçš„`ops`è¡¨

### Q4: å¦‚ä½•æ›´æ–°æ’ä»¶ï¼Ÿ
1. å¤‡ä»½é…ç½®æ–‡ä»¶
2. æ›¿æ¢æ’ä»¶JARæ–‡ä»¶
3. é‡å¯æœåŠ¡å™¨
4. æ£€æŸ¥é…ç½®å…¼å®¹æ€§

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å°è§„æ¨¡æœåŠ¡å™¨**: ä½¿ç”¨æ–‡ä»¶å­˜å‚¨æ¨¡å¼
2. **ä¸­å¤§å‹æœåŠ¡å™¨**: ä½¿ç”¨MySQL+Redisç»„åˆ
3. **è°ƒæ•´æ£€æµ‹é˜ˆå€¼**: æ ¹æ®æœåŠ¡å™¨è´Ÿè½½è°ƒæ•´æ£€æµ‹çµæ•åº¦
4. **å®šæœŸæ¸…ç†ç¼“å­˜**: é•¿æ—¶é—´è¿è¡Œåé‡å¯é‡Šæ”¾å†…å­˜

## ğŸ¤ è´¡çŒ®ä¸æ”¯æŒ

### é—®é¢˜åé¦ˆ
é‡åˆ°é—®é¢˜è¯·æä¾›ï¼š
1. Nukkitç‰ˆæœ¬
2. æ’ä»¶ç‰ˆæœ¬
3. é”™è¯¯æ—¥å¿—æˆªå›¾
4. å¤ç°æ­¥éª¤

### åŠŸèƒ½å»ºè®®
æ¬¢è¿é€šè¿‡GitHub Issuesæäº¤åŠŸèƒ½å»ºè®®ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## ğŸ”Œ API è°ƒç”¨

### ç™¾åº¦å†…å®¹å®¡æ ¸ API

å…¶ä»–æ’ä»¶å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è°ƒç”¨æœ¬æ’ä»¶çš„ç™¾åº¦å†…å®¹å®¡æ ¸åŠŸèƒ½ï¼š

```java
// è·å–ElySecurityæ’ä»¶å®ä¾‹
PluginBase elySecurity = getServer().getPluginManager().getPlugin("ElySecurity");

// æ£€æŸ¥å†…å®¹æ˜¯å¦è¿è§„
if (elySecurity instanceof cn.ElysianArena.ElySecurity.Main) {
    cn.ElysianArena.ElySecurity.Main main = (cn.ElysianArena.ElySecurity.Main) elySecurity;
    cn.ElysianArena.ElySecurity.security.ViolationResult result = main.getProhibitedWords().checkContent(playerName, content);
    
    if (result.isViolated()) {
        // å¤„ç†è¿è§„å†…å®¹
        String source = result.getSource(); // è¿è§„æ¥æº (local/baidu)
        List<String> details = result.getViolationDetails(); // è¿è§„è¯¦æƒ…
        double confidence = result.getConfidence(); // ç½®ä¿¡åº¦
    }
}
```

è¿”å›çš„ ViolationResult å¯¹è±¡åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `violated`: æ˜¯å¦è¿è§„
- `violationType`: è¿è§„ç±»å‹ID
- `subType`: å­ç±»å‹
- `violationDetails`: è¿è§„è¯¦æƒ…(å¦‚å‘½ä¸­çš„å…³é”®è¯)
- `source`: æ£€æµ‹æ¥æº (local/baidu)
- `confidence`: ç½®ä¿¡åº¦
- `message`: é™„åŠ æ¶ˆæ¯

## âœ¨ æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ… OPæƒé™ç®¡ç†
- âœ… ååˆ·å±ç³»ç»Ÿ
- âœ… è¿ç¦è¯è¿‡æ»¤
- âœ… åŒå­˜å‚¨æ¨¡å¼æ”¯æŒ
- âœ… å¤šè¯­è¨€ç•Œé¢